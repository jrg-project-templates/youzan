webpackJsonp([4,7],{"/ENB":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Zrlr"),i=s.n(o),n=s("wxAW"),c=s.n(n),r=s("TFhR"),a=s("wI4f"),d=function(){function t(){i()(this,t)}return c()(t,null,[{key:"getList",value:function(t){return a.a.get(r.a.cartList,{userID:t})}},{key:"increase",value:function(t){return a.a.post(r.a.cartIncrease,{goodsID:t})}},{key:"reduce",value:function(t){return a.a.post(r.a.cartReduce,{goodsID:t})}},{key:"remove",value:function(t){return a.a.post(r.a.cartRemove,{goodsID:t})}},{key:"moreRemove",value:function(t){return a.a.post(r.a.cartMoreRemove,{goodsArr:t})}}]),t}();e.default=d},"0C+S":function(t,e){},"2xgA":function(t,e){},NW8W:function(t,e){},TFhR:function(t,e,s){"use strict";var o={hotList:"index/hotlists",bannerList:"index/banner",topList:"category/topList",subList:"category/subList",rank:"category/rank",searchList:"search/list",goodsDetails:"goods/details",cartAdd:"cart/add",cartList:"cart/cartList",cartIncrease:"cart/increase",cartReduce:"cart/reduce",cartRemove:"cart/remove",cartMoreRemove:"cart/moreRemove",addressGetList:"address/getList",addressAdd:"address/add",addressUpdate:"address/update",addressRemove:"address/remove",addressSetDefault:"address/setDefault"};for(var i in o)o.hasOwnProperty(i)&&(o[i]="https://easy-mock.com/mock/5bd7072a541c73692857acb7/youzan/"+o[i]);e.a=o},"U/rD":function(t,e,s){"use strict";var o=s("mw3O"),i=s.n(o),n=[{id:"footer-01",name:"有赞",icon:"icon-home",href:"index.html"},{id:"footer-02",name:"分类",icon:"icon-category",href:"category.html"},{id:"footer-03",name:"购物车",icon:"icon-cart",href:"cart.html"},{id:"footer-04",name:"我",icon:"icon-user",href:"member.html"}],c={data:function(){return{navConfig:n,activeIndex:parseInt(i.a.parse(location.search.slice(1)).index)||0}},methods:{changeNav:function(t,e){location.href=t.href+"?index="+e}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-nav"},[s("ul",t._l(t.navConfig,function(e,o){return s("li",{key:e.id,class:{active:o===t.activeIndex},on:{click:function(s){t.changeNav(e,o)}}},[s("a",[s("i",{class:e.icon}),t._v(" "),s("div",[t._v(t._s(e.name))])])])}))])},staticRenderFns:[]};var a={components:{Foot:s("VU/8")(c,r,!1,function(t){s("2xgA")},null,null).exports},filters:{currency:function(t){return(Math.round(100*t)/100).toFixed(2)}}};e.a=a},eC21:function(t,e){},gWPi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("NW8W"),i=(s.n(o),s("0C+S")),n=(s.n(i),s("eC21")),c=(s.n(n),s("7+uW")),r=s("9qgI"),a=s.n(r),d=s("/ENB"),u=s("U/rD");new c.default({el:"#app",data:{cartList:null,loading:!0,editingStatus:!1,editingIndex:-1,selectGoodsList:[],removeGoodsList:[],removePopup:!1,removeData:null,removeAllStatus:!1,removeMsg:""},created:function(){var t=this;this.getList().then(function(e){t.loading=!1})},methods:{getList:function(){var t=this;return d.default.getList("99999").then(function(e){var s=e.cartList;s.forEach(function(t){t.selectChecked=!1,t.removeChecked=!1,t.disabled=!1,t.editMsg="编辑",t.goodsList.forEach(function(t){t.selectChecked=!1,t.removeChecked=!1})}),t.cartList=s})},touchStart:function(t,e){e.start=t.changedTouches[0].clientX},touchEnd:function(t,e,s,o){var i=t.changedTouches[0].clientX;s.start-i>100&&a()(this.$refs["goods-"+e+"-"+o],{left:-60}),s.start-i<-100&&a()(this.$refs["goods-"+e+"-"+o],{left:0})},checkNumber:function(t,e){"number"!=typeof e&&(t.number=isNaN(parseInt(e))?1:parseInt(e)>0?parseInt(e):1)},goodsIncrease:function(t,e){1===t.number&&e<0||d.default.reduce(t.id).then(function(s){t.number+=e})},editShop:function(t,e){this.editingStatus?(this.editingStatus=!1,this.editingIndex=-1,this.cartList.forEach(function(t){t.editMsg="编辑",t.disabled=!1})):(this.editingStatus=!0,this.editingIndex=e,t.editMsg="完成",t.disabled=!1,this.cartList.forEach(function(t,s){e!=s&&(t.editMsg="",t.disabled=!0)}))},selectGoods:function(t,e,s,o){var i=this;t.disabled||(e[this.checkType]=!e[this.checkType],t[this.checkType]=t.goodsList.every(function(t){return t[i.checkType]}),this.checkSelectList(e))},selectShops:function(t){var e=this;t.disabled||(t[this.checkType]=!t[this.checkType],t.goodsList.forEach(function(s){s[e.checkType]=t[e.checkType],e.checkSelectList(s)}))},checkSelectList:function(t){var e=this.editingStatus?"removeGoodsList":"selectGoodsList";if(t[this.checkType])-1===this[e].indexOf(t)&&this[e].push(t);else for(var s=this[e].length-1;s>=0;s--){this[e][s].id===t.id&&this[e].splice(s,1)}},removeGoods:function(t,e,s,o){this.removeAllStatus=!1,this.removePopup=!0,this.removeData={shop:t,shopIndex:e,goods:s,goodsIndex:o},this.removeMsg="确定要删除该商品？"},removeMoreGoods:function(){this.removeAllStatus=!0,this.removePopup=!0,this.removeMsg="确定要删除"+this.removeGoodsList.length+"件商品？"},removeConfirm:function(){var t=this;if(this.removeAllStatus)d.default.moreRemove(this.removeGoodsList.map(function(t){return t.id})).then(function(e){var s=t.editingIndex,o=t.cartList[t.editingIndex];t.removeGoodsList.forEach(function(e){var i=o.goodsList.indexOf(e);t.removeGoodsSuccess({shop:o,shopIndex:s,goods:e,goodsIndex:i})}),t.removeGoodsList=[],t.removeAllStatus=!1});else{var e=this.removeData,s=e.shop,o=e.shopIndex,i=e.goods,n=e.goodsIndex;d.default.remove(i.id).then(function(e){t.removeGoodsSuccess({shop:s,shopIndex:o,goods:i,goodsIndex:n}),t.removeData=null})}},removeGoodsSuccess:function(t){var e=t.shop,s=t.shopIndex,o=(t.goods,t.goodsIndex);e.goodsList.splice(o,1),e.goodsList.length||this.removeShop(s),this.removePopup=!1,this.removeData=null},removeShop:function(t){var e=this;this.cartList.splice(t,1),this.cartList.forEach(function(t){t.disabled=!1,t.editMsg="编辑",e.editingStatus=!1})},allSelect:function(){this.allSelctStatus=!this.allSelctStatus}},computed:{allPrice:function(){return this.selectGoodsList.reduce(function(t,e){return t+e.price*e.number},0)},allCount:function(){return this.selectGoodsList.length},checkType:function(){return this.editingStatus?"removeChecked":"selectChecked"},allSelctStatus:{get:function(){return this.editingStatus?this.cartList[this.editingIndex].removeChecked:this.selectGoodsList.length===this.cartList.reduce(function(t,e){return t+e.goodsList.length},0)},set:function(t){var e=this;if(this.editingStatus){var s=this.cartList[this.editingIndex];s[this.checkType]=t,s.goodsList.forEach(function(s){s[e.checkType]=t,e.checkSelectList(s)})}else this.cartList.forEach(function(s){s[e.checkType]=t,s.goodsList.forEach(function(s,o){s[e.checkType]=t,e.checkSelectList(s)})})}}},mixins:[u.a]})},wI4f:function(t,e,s){"use strict";var o=s("//Fk"),i=s.n(o),n=s("mtWM"),c=s.n(n),r={get:function(t,e){return new i.a(function(s,o){c.a.get(t,e).then(function(t){200===t.status&&s(t.data.data),401===t.status&&(location.href="/login.html"),s(t.data.data)}).catch(function(t){console.log("获取数据失败"),o(t)})})},post:function(t,e){return new i.a(function(s,o){c.a.post(t,e).then(function(t){200===t.status&&s(t.data.data),401===t.status&&(location.href="/login.html"),s(t.data.data)}).catch(function(t){console.log("获取数据失败"),o(t)})})}};e.a=r}},["gWPi"]);
//# sourceMappingURL=cart.8fcee43569ec4363ba48.js.map