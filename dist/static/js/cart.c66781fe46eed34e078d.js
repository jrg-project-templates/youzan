webpackJsonp([4,7],{"/ENB":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Zrlr"),n=s.n(o),i=s("wxAW"),c=s.n(i),a=s("TFhR"),r=s("wI4f"),d=function(){function t(){n()(this,t)}return c()(t,null,[{key:"getList",value:function(t){return r.a.get(a.a.cartList,{userID:t})}},{key:"increase",value:function(t){return r.a.post(a.a.cartIncrease,{goodsID:t})}},{key:"reduce",value:function(t){return r.a.post(a.a.cartReduce,{goodsID:t})}},{key:"remove",value:function(t){return r.a.post(a.a.cartRemove,{goodsID:t})}},{key:"moreRemove",value:function(t){return r.a.post(a.a.cartMoreRemove,{goodsArr:t})}}]),t}();e.default=d},"0C+S":function(t,e){},NW8W:function(t,e){},TFhR:function(t,e,s){"use strict";var o={hotList:"index/hotlists",bannerList:"index/banner",topList:"category/topList",subList:"category/subList",rank:"category/rank",searchList:"search/list",goodsDetails:"goods/details",cartAdd:"cart/add",cartList:"cart/cartList",cartIncrease:"cart/increase",cartReduce:"cart/reduce",cartRemove:"cart/remove",cartMoreRemove:"cart/moreRemove",addressGetList:"address/getList",addressAdd:"address/add",addressUpdate:"address/update",addressRemove:"address/remove",addressSetDefault:"address/setDefault"};for(var n in o)o.hasOwnProperty(n)&&(o[n]="https://easy-mock.com/mock/5bd7072a541c73692857acb7/youzan/"+o[n]);e.a=o},"U/rD":function(t,e,s){"use strict";var o=s("mw3O"),n=s.n(o),i=[{id:"footer-01",name:"有赞",icon:"icon-home",href:"/youzan"},{id:"footer-02",name:"分类",icon:"icon-category",href:"category.html"},{id:"footer-03",name:"购物车",icon:"icon-cart",href:"cart.html"},{id:"footer-04",name:"我",icon:"icon-user",href:"member.html"}],c={data:function(){return{navConfig:i,activeIndex:parseInt(n.a.parse(location.search.slice(1)).index)||0}},methods:{changeNav:function(t,e){location.href=t.href+"?index="+e}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-nav"},[s("ul",t._l(t.navConfig,function(e,o){return s("li",{key:e.id,class:{active:o===t.activeIndex},on:{click:function(s){t.changeNav(e,o)}}},[s("a",[s("i",{class:e.icon}),t._v(" "),s("div",[t._v(t._s(e.name))])])])}))])},staticRenderFns:[]};var r={components:{Foot:s("VU/8")(c,a,!1,function(t){s("Zuyv")},null,null).exports},filters:{currency:function(t){return(Math.round(100*t)/100).toFixed(2)}}};e.a=r},Zuyv:function(t,e){},eC21:function(t,e){},gWPi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("NW8W"),n=(s.n(o),s("0C+S")),i=(s.n(n),s("eC21")),c=(s.n(i),s("7+uW")),a=s("9qgI"),r=s.n(a),d=s("/ENB"),u=s("U/rD");new c.default({el:"#app",data:{cartList:null,loading:!0,editingStatus:!1,editingIndex:-1,selectGoodsList:[],removeGoodsList:[],removePopup:!1,removeData:null,removeAllStatus:!1,removeMsg:""},created:function(){var t=this;this.getList().then(function(e){t.loading=!1})},methods:{getList:function(){var t=this;return d.default.getList("99999").then(function(e){var s=e.cartList;s.forEach(function(t){t.selectChecked=!1,t.removeChecked=!1,t.disabled=!1,t.editMsg="编辑",t.goodsList.forEach(function(t){t.selectChecked=!1,t.removeChecked=!1})}),t.cartList=s})},touchStart:function(t,e){e.start=t.changedTouches[0].clientX},touchEnd:function(t,e,s,o){var n=t.changedTouches[0].clientX;s.start-n>100&&r()(this.$refs["goods-"+e+"-"+o],{left:-60}),s.start-n<-100&&r()(this.$refs["goods-"+e+"-"+o],{left:0})},checkNumber:function(t,e){"number"!=typeof e&&(t.number=isNaN(parseInt(e))?1:parseInt(e)>0?parseInt(e):1)},goodsIncrease:function(t,e){1===t.number&&e<0||d.default.reduce(t.id).then(function(s){t.number+=e})},editShop:function(t,e){this.editingStatus?(this.editingStatus=!1,this.editingIndex=-1,this.cartList.forEach(function(t){t.editMsg="编辑",t.disabled=!1})):(this.editingStatus=!0,this.editingIndex=e,t.editMsg="完成",t.disabled=!1,this.cartList.forEach(function(t,s){e!=s&&(t.editMsg="",t.disabled=!0)}))},selectGoods:function(t,e,s,o){var n=this;t.disabled||(e[this.checkType]=!e[this.checkType],t[this.checkType]=t.goodsList.every(function(t){return t[n.checkType]}),this.checkSelectList(e))},selectShops:function(t){var e=this;t.disabled||(t[this.checkType]=!t[this.checkType],t.goodsList.forEach(function(s){s[e.checkType]=t[e.checkType],e.checkSelectList(s)}))},checkSelectList:function(t){var e=this.editingStatus?"removeGoodsList":"selectGoodsList";if(t[this.checkType])-1===this[e].indexOf(t)&&this[e].push(t);else for(var s=this[e].length-1;s>=0;s--){this[e][s].id===t.id&&this[e].splice(s,1)}},removeGoods:function(t,e,s,o){this.removeAllStatus=!1,this.removePopup=!0,this.removeData={shop:t,shopIndex:e,goods:s,goodsIndex:o},this.removeMsg="确定要删除该商品？"},removeMoreGoods:function(){this.removeAllStatus=!0,this.removePopup=!0,this.removeMsg="确定要删除"+this.removeGoodsList.length+"件商品？"},removeConfirm:function(){var t=this;if(this.removeAllStatus)d.default.moreRemove(this.removeGoodsList.map(function(t){return t.id})).then(function(e){var s=t.editingIndex,o=t.cartList[t.editingIndex];t.removeGoodsList.forEach(function(e){var n=o.goodsList.indexOf(e);t.removeGoodsSuccess({shop:o,shopIndex:s,goods:e,goodsIndex:n})}),t.removeGoodsList=[],t.removeAllStatus=!1});else{var e=this.removeData,s=e.shop,o=e.shopIndex,n=e.goods,i=e.goodsIndex;d.default.remove(n.id).then(function(e){t.removeGoodsSuccess({shop:s,shopIndex:o,goods:n,goodsIndex:i}),t.removeData=null})}},removeGoodsSuccess:function(t){var e=t.shop,s=t.shopIndex,o=(t.goods,t.goodsIndex);e.goodsList.splice(o,1),e.goodsList.length||this.removeShop(s),this.removePopup=!1,this.removeData=null},removeShop:function(t){var e=this;this.cartList.splice(t,1),this.cartList.forEach(function(t){t.disabled=!1,t.editMsg="编辑",e.editingStatus=!1})},allSelect:function(){this.allSelctStatus=!this.allSelctStatus}},computed:{allPrice:function(){return this.selectGoodsList.reduce(function(t,e){return t+e.price*e.number},0)},allCount:function(){return this.selectGoodsList.length},checkType:function(){return this.editingStatus?"removeChecked":"selectChecked"},allSelctStatus:{get:function(){return this.editingStatus?this.cartList[this.editingIndex].removeChecked:this.selectGoodsList.length===this.cartList.reduce(function(t,e){return t+e.goodsList.length},0)},set:function(t){var e=this;if(this.editingStatus){var s=this.cartList[this.editingIndex];s[this.checkType]=t,s.goodsList.forEach(function(s){s[e.checkType]=t,e.checkSelectList(s)})}else this.cartList.forEach(function(s){s[e.checkType]=t,s.goodsList.forEach(function(s,o){s[e.checkType]=t,e.checkSelectList(s)})})}}},mixins:[u.a]})},wI4f:function(t,e,s){"use strict";var o=s("//Fk"),n=s.n(o),i=s("mtWM"),c=s.n(i),a={get:function(t,e){return new n.a(function(s,o){c.a.get(t,e).then(function(t){200===t.status&&s(t.data.data),401===t.status&&(location.href="/login.html"),s(t.data.data)}).catch(function(t){console.log("获取数据失败"),o(t)})})},post:function(t,e){return new n.a(function(s,o){c.a.post(t,e).then(function(t){200===t.status&&s(t.data.data),401===t.status&&(location.href="/login.html"),s(t.data.data)}).catch(function(t){console.log("获取数据失败"),o(t)})})}};e.a=a}},["gWPi"]);
//# sourceMappingURL=cart.c66781fe46eed34e078d.js.map